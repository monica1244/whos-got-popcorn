<html lang="en-us">
  <head>
    <meta charset="UTF-8">
    <title>Who's Got Popcorn</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" href="stylesheets/normalize.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/github-light.css" media="screen">
    <link href='https://fonts.googleapis.com/css?family=Varela' rel='stylesheet'>
    <link rel="preconnect" href="https://fonts.gstatic.com"> 
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@600&display=swap" rel="stylesheet">
    <link href='https://fonts.googleapis.com/css?family=Yeseva One' rel='stylesheet'>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
    <script src="https://d3js.org/d3.v3.min.js"></script>
  </head>
  <body>
    <div class = "viz_column">
      <div class = "welcome_div">
        <p class = "explore">EXPLORE</p>
        <p class = "movies_welcome">Movies</p>

      </div>
      <div class = "graph_viz">
        <svg id = "svg2" width="500" height="500"></svg>
      </div>
      <div class = "timeline_viz" id = "timeline_viz">
        <svg class = "svg1">
        </svg>
      </div>
    </div>
    <div class = "controls_column">
      <div class = "filters">
        <div class = "Bubble_heading">Cluster Bubbles</div>
        <div class = "filter_box">
          <div class = "filter_box_box">  
            <div class = "filter_heading"><p>Filter</p></div>
            <div class = "filter_dropdown">
              <nav id="menu">
                <label for="tm" id="toggle-menu">Navigation <span class="drop-icon">▾</span></label>
                <input type="checkbox" id="tm">
                <ul class="main-menu clearfix">
                  <li><a>Select
                      <span class="drop-icon">▾</span>
                      <label title="Toggle Drop-down" class="drop-icon" for="sm1">▾</label>
                    </a>
                    <input type="checkbox" id="sm1">
                    <ul class="sub-menu">
                      <li><a>Genre
                          <span class="drop-icon">▾</span>
                          <label title="Toggle Drop-down" class="drop-icon" for="sm2">▾</label>
                          </a>
                        <input type="checkbox" id="sm2">
                        <ul class="sub-menu filter_sub_menu" id ="genre_list">
                          <li><a onclick="filterBy('Genre','Action')">Action</a></li>
                          <li><a onclick="filterBy('Genre','Adventure')">Adventure</a></li>
                          <li><a onclick="filterBy('Genre','Animation')">Animation</a></li>
                          <li><a onclick="filterBy('Genre','Comedy')">Comedy</a></li>
                          <li><a onclick="filterBy('Genre','Crime')">Crime</a></li>
                          <li><a onclick="filterBy('Genre','Documentary')">Documentary</a></li>
                          <li><a onclick="filterBy('Genre','Drama')">Drama</a></li>
                          <li><a onclick="filterBy('Genre','Family')">Family</a></li>
                          <li><a onclick="filterBy('Genre','Fantasy')">Fantasy</a></li>
                          <li><a onclick="filterBy('Genre','History')">History</a></li>
                          <li><a onclick="filterBy('Genre','Horror')">Horror</a></li>
                          <li><a onclick="filterBy('Genre','Music')">Music</a></li>
                          <li><a onclick="filterBy('Genre','Mystery')">Mystery</a></li>
                          <li><a onclick="filterBy('Genre','Romance')">Romance</a></li>
                          <li><a onclick="filterBy('Genre','Science Fiction')">Science Fiction</a></li>
                          <li><a onclick="filterBy('Genre','Thriller')">Thriller</a></li>
                          <li><a onclick="filterBy('Genre','War')">War</a></li>
                          <li><a onclick="filterBy('Genre','Western')">Western</a></li>
                        </ul>
                      </li>
                      <li><a>Actor
                          <span class="drop-icon">▾</span>
                          <label title="Toggle Drop-down" class="drop-icon" for="sm2">▾</label>
                        </a>
                        <input type="checkbox" id="sm3">
                        <ul class="sub-menu filter_sub_menu_2" id = "actor_list">
                          <li><input class="list_search" id="actor_input" type="text" placeholder="Search.."></li>
                        </ul>
                      </li>
                      <li><a>Director
                          <span class="drop-icon">▾</span>
                          <label title="Toggle Drop-down" class="drop-icon" for="sm2">▾</label>
                          </a>
                        <input type="checkbox" id="sm4">
                        <ul class="sub-menu filter_sub_menu_3" id = "director_list">
                          <li><input class="list_search" id="director_input" type="text" placeholder="Search.."></li>
                        </ul>
                      </li>
                      <li><a>Production Company
                          <span class="drop-icon">▾</span>
                          <label title="Toggle Drop-down" class="drop-icon" for="sm2">▾</label>
                          </a>
                        <input type="checkbox" id="sm5">
                        <ul class="sub-menu filter_sub_menu_4" id = "production_company_list">
                          <li><input class="list_search" id="production_company_input" type="text" placeholder="Search.."></li>
                        </ul>
                      </li>
                      <li><a>Keyword
                          <span class="drop-icon">▾</span>
                          <label title="Toggle Drop-down" class="drop-icon" for="sm2">▾</label>
                          </a>
                        <input type="checkbox" id="sm5">
                        <ul class="sub-menu filter_sub_menu_5" id = "keyword_list">
                          <li><input class="list_search" id="keyword_input" type="text" placeholder="Search.."></li>
                        </ul>
                      </li>
                    </ul>
                  </li>
                </ul>
              </nav>
            </div>
          </div>
          <div id = "filter_tag_holder">
          </div>
        </div>
        <div class = "Color_heading">
          <p>Scale By</p>
          <div class = "Color_dropdown">
            <nav id="menu">
              <label for="tm" id="toggle-menu">Navigation <span class="drop-icon">▾</span></label>
              <input type="checkbox" id="tm">
              <ul class="main-menu clearfix">
                <li><a id = "Color_sub_menu_heading">Popularity
                    <span class="drop-icon">▾</span>
                    <label title="Toggle Drop-down" class="drop-icon" for="sm1">▾</label>
                  </a>
                  <input type="checkbox" id="sm1">
                  <ul class="sub-menu Color_sub_menu color_scrollable_menu">
                    <li><a onclick = "onBubbleScaleChanged('popularity')">Popularity</a></li>
                    <li><a onclick = "onBubbleScaleChanged('rating')">Rating</a></li>
                    <li><a onclick = "onBubbleScaleChanged('revenue')">Revenue</a></li>
                    <li><a onclick = "onBubbleScaleChanged('budget')">Budget</a></li>
                  </ul>
                </li>
              </ul>
            </nav>
          </div>
        </div>
      </div>
      <div class = "timeline_control">
        <div class = "timeline_heading">Timeline</div>
        <div class = "Y_axis">
          <p>Y-Axis</p>
          <div class = "Y_axis_dropdown">
            <nav id="menu">
              <label for="tm" id="toggle-menu">Navigation <span class="drop-icon">▾</span></label>
              <input type="checkbox" id="tm">
              <ul class="main-menu clearfix">
                <li><a id = "Y_axis_sub_menu_heading">Number of Movies
                    <span class="drop-icon">▾</span>
                    <label title="Toggle Drop-down" class="drop-icon" for="sm1">▾</label>
                  </a>
                  <input type="checkbox" id="sm1">
                  <ul class="sub-menu Y_axis_sub_menu y_scrollable_menu">
                    <li><a onclick = "onYScaleChanged('count')">Number of Movies</a></li>
                    <li><a onclick = "onYScaleChanged('popularity')">Average Popularity</a></li>
                    <li><a onclick = "onYScaleChanged('revenue')">Average Revenue</a></li>
                    <li><a onclick = "onYScaleChanged('budget')">Average Budget</a></li>
                    <li><a onclick = "onYScaleChanged('profit')">Average Profit</a></li>
                    <li><a onclick = "onYScaleChanged('average_rating')">Average Rating</a></li>
                    <li><a onclick = "onYScaleChanged('vote_count')">Vote Count</a></li>
                  </ul>
                </li>
              </ul>
            </nav>
          </div>
        </div>
        <div class = "Genres">
          <p>Genre</p>
          <div class = "Genre_dropdown">
            <nav id="menu">
              <label for="tm" id="toggle-menu">Navigation <span class="drop-icon">▾</span></label>
              <input type="checkbox" id="tm">
              <ul class="main-menu clearfix">
                <li><a>Select Genre 
                    <span class="drop-icon">▾</span>
                    <label title="Toggle Drop-down" class="drop-icon" for="sm1">▾</label>
                  </a>
                  <input type="checkbox" id="sm1">
                  <ul class="sub-menu genre_sub_menu genre_scrollable_menu">
                    <li><a onclick = "onGenreSelected('All')">All</a></li>
                    <li><a onclick = "onGenreSelected('Action')">Action</a></li>
                    <li><a onclick = "onGenreSelected('Adventure')">Adventure</a></li>
                    <li><a onclick = "onGenreSelected('Animation')">Animation</a></li>
                    <li><a onclick = "onGenreSelected('Comedy')">Comedy</a></li>
                    <li><a onclick = "onGenreSelected('Crime')">Crime</a></li>
                    <li><a onclick = "onGenreSelected('Documentary')">Documentary</a></li>
                    <li><a onclick = "onGenreSelected('Drama')">Drama</a></li>
                    <li><a onclick = "onGenreSelected('Family')">Family</a></li>
                    <li><a onclick = "onGenreSelected('Fantasy')">Fantasy</a></li>
                    <li><a onclick = "onGenreSelected('History')">History</a></li>
                    <li><a onclick = "onGenreSelected('Horror')">Horror</a></li>
                    <li><a onclick = "onGenreSelected('Music')">Music</a></li>
                    <li><a onclick = "onGenreSelected('Mystery')">Mystery</a></li>
                    <li><a onclick = "onGenreSelected('Romance')">Romance</a></li>
                    <li><a onclick = "onGenreSelected('Science Fiction')">Science Fiction</a></li>
                    <li><a onclick = "onGenreSelected('Thriller')">Thriller</a></li>
                    <li><a onclick = "onGenreSelected('War')">War</a></li>
                    <li><a onclick = "onGenreSelected('Western')">Western</a></li>
                  </ul>
                </li>
              </ul>
            </nav>
          </div>
        </div>
        <div class = "Genre_tags" id = "tag_holder">
        </div>
      </div>
    </div>
    <script src = "./test.js" type="text/javascript"></script>
    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.3/umd/popper.min.js" integrity="sha384-vFJXuSJphROIrBnz7yo7oB41mKfc8JzQZiCq4NCceLEaO4IHwicKwpJf9c9IpFgh" crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta.2/js/bootstrap.min.js" integrity="sha384-alpBpkh1PFOepccYVYDB4do5UnbKysX5WZXm3XxPqe5iKTfUKjNkCk9SaVuEZflJ" crossorigin="anonymous"></script>
    <script src="https://d3js.org/d3.v5.min.js"></script>
    <script src="./Timeseries_Graph/main.js"></script>
    <script src="./keywords.js"></script>
    <script src="./actors.js"></script>
    <script src="./bubble.js"></script>
    <script src="./directors.js"></script>
    <script src="./production_companies.js"></script>
    <script type="text/javascript">
      var genres = [];
      var applied_filters = [];
      var all_genres = ["Action", "Adventure", "Animation", "Comedy", "Crime", "Documentary", "Drama", "Family", "Fantasy", "History", "Horror", "Music", "Mystery", "Romance", "Science Fiction", "Thriller", "War", "Western"];
      $(".Y_axis_sub_menu > li").click(function() {
        $("#Y_axis_sub_menu_heading").text($(this).text()+" "); 
        $("#Y_axis_sub_menu_heading").append('<span class="drop-icon">▾</span><label title="Toggle Drop-down" class="drop-icon" for="sm1">▾</label>');
      });
      
      $(document).on('click', '.close_tag', function() { 
        genres.splice(genres.indexOf($(this).prev().text()), 1);
        $(this).parent('div').remove(); 
      });

      $(document).on('click', '.close_filter_tag', function() { 
        applied_filters.splice(applied_filters.indexOf($(this).prev().text()), 1);
        $(this).parent('div').remove(); 
      });

      $(".filter_sub_menu > li").click(function() {
        var str2 = $(this).text();
        if (!applied_filters.includes(str2)) {
          var d = document.createElement("div");
          d.className = "filter_tag";
          var a1 = document.createElement("a");
          a1.appendChild(document.createTextNode(str2));
          var a2 = document.createElement("a");
          a2.appendChild(document.createTextNode("x"));
          a2.className = "close_filter_tag";
          var str3 = "removeFilter(\'Genre\',\'";
          var str4 = "\')";
          var str5 = str3.concat(str2, str4);
          a2.setAttribute("onclick", str5);
          d.appendChild(a1);
          d.appendChild(document.createTextNode("\u00A0"));
          d.appendChild(a2);
          filter_tag_holder.appendChild(d);
          applied_filters.push(str2);
        }
      });
      
      $(document).on('click', '.Actor10', function() { 
        var str2 = $(this).text();
        if (!applied_filters.includes(str2)) {
          var d = document.createElement("div");
          d.className = "filter_tag";
          var a1 = document.createElement("a");
          a1.appendChild(document.createTextNode(str2));
          var a2 = document.createElement("a");
          a2.appendChild(document.createTextNode("x"));
          a2.className = "close_filter_tag";
          var str3 = "removeFilter(\'Actor\',\'";
          var str4 = "\')";
          var str5 = str3.concat(str2, str4);
          a2.setAttribute("onclick", str5);
          d.appendChild(a1);
          d.appendChild(document.createTextNode("\u00A0"));
          d.appendChild(a2);
          filter_tag_holder.appendChild(d);
          applied_filters.push(str2);
        }
      });

      $(document).ready(function(){
        $(".Director10").click(function() {
          var str2 = $(this).text();
          if (!applied_filters.includes(str2)) {
            var d = document.createElement("div");
            d.className = "filter_tag";
            var a1 = document.createElement("a");
            a1.appendChild(document.createTextNode(str2));
            var a2 = document.createElement("a");
            a2.appendChild(document.createTextNode("x"));
            a2.className = "close_filter_tag";
            var str3 = "removeFilter(\'Director\',\'";
            var str4 = "\')";
            var str5 = str3.concat(str2, str4);
            a2.setAttribute("onclick", str5);
            d.appendChild(a1);
            d.appendChild(document.createTextNode("\u00A0"));
            d.appendChild(a2);
            filter_tag_holder.appendChild(d);
            applied_filters.push(str2);
          }
        });
      });

      $(document).ready(function(){
        $(".Production10").click(function() {
          var str2 = $(this).text();
          if (!applied_filters.includes(str2)) {
            var d = document.createElement("div");
            d.className = "filter_tag";
            var a1 = document.createElement("a");
            a1.appendChild(document.createTextNode(str2));
            var a2 = document.createElement("a");
            a2.appendChild(document.createTextNode("x"));
            a2.className = "close_filter_tag";
            var str3 = "removeFilter(\'Production Company\',\'";
            var str4 = "\')";
            var str5 = str3.concat(str2, str4);
            a2.setAttribute("onclick", str5);
            d.appendChild(a1);
            d.appendChild(document.createTextNode("\u00A0"));
            d.appendChild(a2);
            filter_tag_holder.appendChild(d);
            applied_filters.push(str2);
          }
        });
      });

      $(document).ready(function(){
        $(".Keyword10").click(function() {
          var str2 = $(this).text();
          if (!applied_filters.includes(str2)) {
            var d = document.createElement("div");
            d.className = "filter_tag";
            var a1 = document.createElement("a");
            a1.appendChild(document.createTextNode(str2));
            var a2 = document.createElement("a");
            a2.appendChild(document.createTextNode("x"));
            a2.className = "close_filter_tag";
            var str3 = "removeFilter(\'Keyword\',\'";
            var str4 = "\')";
            var str5 = str3.concat(str2, str4);
            a2.setAttribute("onclick", str5);
            d.appendChild(a1);
            d.appendChild(document.createTextNode("\u00A0"));
            d.appendChild(a2);
            filter_tag_holder.appendChild(d);
            applied_filters.push(str2);
          }
        });
      });

      $(".genre_sub_menu > li").click(function() {
        var str2 = $(this).text();
        if (str2 == "All") {
          for (i = 0; i < all_genres.length; i++) {
            if (!genres.includes(all_genres[i])) {
              var d = document.createElement("div");
              d.className = all_genres[i];
              var a1 = document.createElement("a");
              a1.appendChild(document.createTextNode(all_genres[i]));
              var a2 = document.createElement("a");
              a2.appendChild(document.createTextNode("x"));
              a2.className = "close_tag";
              var str3 = "onGenreDelected(\'";
              var str4 = "\')";
              var str5 = str3.concat(all_genres[i], str4);
              a2.setAttribute("onclick", str5);
              d.appendChild(a1);
              d.appendChild(document.createTextNode("\u00A0"));
              d.appendChild(a2);
              tag_holder.appendChild(d);
              genres.push(all_genres[i]);
            }
          }
        }
        else if (!genres.includes(str2)) {
          var d = document.createElement("div");
          d.className = str2;
          var a1 = document.createElement("a");
          a1.appendChild(document.createTextNode(str2));
          var a2 = document.createElement("a");
          a2.appendChild(document.createTextNode("x"));
          a2.className = "close_tag";
          var str3 = "onGenreDelected(\'";
          var str4 = "\')";
          var str5 = str3.concat(str2, str4);
          a2.setAttribute("onclick", str5);
          d.appendChild(a1);
          d.appendChild(document.createTextNode("\u00A0"));
          d.appendChild(a2);
          tag_holder.appendChild(d);
          genres.push(str2);
        }
      });
      
      $(".Color_sub_menu > li").click(function() {
        $("#Color_sub_menu_heading").text($(this).text()+" "); 
        $("#Color_sub_menu_heading").append('<span class="drop-icon">▾</span><label title="Toggle Drop-down" class="drop-icon" for="sm1">▾</label>');
      });
      
      $(document).ready(function(){
        $("#actor_input").on("keyup", function() {
          var value = $(this).val().toLowerCase();
          $("#actor_list li a").filter(function() {
            $(this).parent().toggle($(this).text().toLowerCase().indexOf(value) > -1)
          });
        });
      });

      $(document).ready(function(){
        $("#director_input").on("keyup", function() {
          var value = $(this).val().toLowerCase();
          $("#director_list li a").filter(function() {
            $(this).parent().toggle($(this).text().toLowerCase().indexOf(value) > -1)
          });
        });
      });

      $(document).ready(function(){
        $("#production_company_input").on("keyup", function() {
          var value = $(this).val().toLowerCase();
          $("#production_company_list li a").filter(function() {
            $(this).parent().toggle($(this).text().toLowerCase().indexOf(value) > -1)
          });
        });
      });

      $(document).ready(function(){
        $("#keyword_input").on("keyup", function() {
          var value = $(this).val().toLowerCase();
          $("#keyword_list li a").filter(function() {
            $(this).parent().toggle($(this).text().toLowerCase().indexOf(value) > -1)
          });
        });
      });

    </script>
  </body>
</html>
